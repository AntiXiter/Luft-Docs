{% extends "base.html" %}
{% block title %}{{ nome }} - Submódulo{% endblock %}
{% block content %}
    <h1>{{ nome }}</h1>
    <div class="submodulo-conteudo">
        {# 1) Recebemos aqui o HTML bruto em “conteudo”, que contém "__TOKEN_PLACEHOLDER__" #}
        {% set html_bruto = conteudo %}

        {# 2) Substituímos “__TOKEN_PLACEHOLDER__” pelo token real vindo de request.args #}
        {% set conteudo_corrigido = html_bruto.replace("__TOKEN_PLACEHOLDER__", request.args.get('token', '')) %}

        {# 3) Renderizamos o resultado final #}
        {{ conteudo_corrigido | safe }}
    </div>
    <hr>
    {# Usamos javascript:history.back() para voltar à página anterior do histórico #}
    <a href="javascript:history.back()" class="btn btn-outline-secondary">
        ← Voltar
    </a>
{% endblock %}
